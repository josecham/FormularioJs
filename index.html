<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Neon VR City Experience</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; background: #000; touch-action: none; }
        .vr-container { display: flex; width: 100vw; height: 100vh; }
        .eye { 
            flex: 1; height: 100%; overflow: hidden; position: relative; 
            perspective: 1000px; border-right: 1px solid rgba(255,255,255,0.1);
        }
        
        /* La escena 3D que usa la imagen de fondo */
        .scene {
            position: absolute; width: 100%; height: 100%;
            transform-style: preserve-3d;
            background-image: url('https://files.oaiusercontent.com/file-6fTz8Sj3Zf7Gj9Kj8L4d6G?se=2024-05-23T12%3A00%3A00Z&sp=r&sv=2024-08-04&sr=b&rscc=max-age%3D604800%2C%20immutable%2C%20private&rscd=attachment%3B%20filename%3DNeonCityVR.jpg');
            background-size: cover;
            background-position: center;
        }

        /* Capa de suelo brillante ne√≥n */
        .neon-floor {
            position: absolute; width: 4000px; height: 4000px;
            background: 
                linear-gradient(rgba(0, 210, 255, 0.1) 2px, transparent 2px),
                linear-gradient(90deg, rgba(255, 0, 255, 0.1) 2px, transparent 2px);
            background-size: 80px 80px;
            transform: rotateX(90deg) translate3d(-2000px, 0, -300px);
            box-shadow: 0 0 50px rgba(0, 210, 255, 0.2) inset;
        }

        .overlay {
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(10px);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const App = () => {
            const [active, setActive] = useState(false);
            const [rotation, setRotation] = useState({ alpha: 0, beta: 0, gamma: 0 });
            const [walk, setWalk] = useState(0);

            const handleMotion = (e) => {
                setRotation({
                    alpha: e.alpha || 0,
                    beta: e.beta || 0,
                    gamma: e.gamma || 0
                });
            };

            const startVR = () => {
                if (typeof DeviceOrientationEvent.requestPermission === 'function') {
                    DeviceOrientationEvent.requestPermission().then(state => {
                        if (state === 'granted') {
                            window.addEventListener('deviceorientation', handleMotion);
                            setActive(true);
                        }
                    });
                } else {
                    window.addEventListener('deviceorientation', handleMotion);
                    setActive(true);
                }
            };

            // Efecto de caminar (desplazamiento del suelo)
            useEffect(() => {
                if (!active) return;
                const loop = setInterval(() => {
                    // Si inclinas la cabeza hacia adelante, "caminas"
                    if (rotation.beta > 75) {
                        setWalk(w => (w + 8) % 80);
                    }
                }, 16);
                return () => clearInterval(loop);
            }, [active, rotation.beta]);

            if (!active) return (
                <div className="h-screen flex items-center justify-center bg-black">
                    <div className="overlay p-10 rounded-[40px] border border-cyan-500/30 text-center max-w-sm">
                        <h1 className="text-white text-4xl font-bold mb-4 tracking-tighter">NEON VR CITY</h1>
                        <p className="text-cyan-400/70 mb-8">Coloca el celular en tu VR Box y camina mirando al suelo.</p>
                        <button 
                            className="bg-cyan-500 hover:bg-cyan-400 text-black font-black px-8 py-4 rounded-2xl transition-all shadow-[0_0_30px_rgba(34,211,238,0.4)]"
                            onClick={startVR}>
                            START VR EXPERIENCE
                        </button>
                    </div>
                </div>
            );

            const renderEye = (eyeOffset) => (
                <div className="eye">
                    <div className="scene" style={{
                        transform: `
                            rotateX(${(rotation.beta - 90)}deg) 
                            rotateY(${(-rotation.alpha + eyeOffset)}deg)
                            rotateZ(${-rotation.gamma}deg)
                        `
                    }}>
                        <div className="neon-floor" style={{
                            backgroundPosition: `0px ${walk}px`
                        }} />
                    </div>
                </div>
            );

            return (
                <div className="vr-container">
                    {renderEye(-1.5)}
                    {renderEye(1.5)}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
